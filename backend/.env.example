# ===========================================
# CONFIGURATION DIRECTUS - PROJET UTAU
# ===========================================
# Copier ce fichier en .env et remplacer les valeurs

# ------------------------------------
# Général
# ------------------------------------
HOST=127.0.0.1
PORT=8055
PUBLIC_URL=http://localhost:8055

# ------------------------------------
# Base de données
# ------------------------------------
DB_CLIENT=sqlite3
DB_FILENAME=./data.db

# ------------------------------------
# Sécurité (générer avec: openssl rand -hex 32)
# ------------------------------------
SECRET=votre-secret-genere-avec-openssl

# ------------------------------------
# Tokens JWT
# ------------------------------------
ACCESS_TOKEN_TTL=15m
REFRESH_TOKEN_TTL=7d
REFRESH_TOKEN_COOKIE_SECURE=false
REFRESH_TOKEN_COOKIE_SAME_SITE=lax
REFRESH_TOKEN_COOKIE_NAME=directus_refresh_token
REFRESH_TOKEN_COOKIE_DOMAIN=localhost

# ------------------------------------
# Sessions
# ------------------------------------
SESSION_COOKIE_TTL=1d
SESSION_COOKIE_SECURE=false
SESSION_COOKIE_SAME_SITE=lax
SESSION_COOKIE_NAME=directus_session_token
SESSION_COOKIE_DOMAIN=localhost

# ------------------------------------
# CORS (pour le frontend Angular)
# ------------------------------------
CORS_ENABLED=true
CORS_ORIGIN=http://localhost:4200
CORS_METHODS=GET,POST,PATCH,DELETE
CORS_ALLOWED_HEADERS=Content-Type,Authorization
CORS_EXPOSED_HEADERS=Content-Range
CORS_CREDENTIALS=true
CORS_MAX_AGE=18000

# ------------------------------------
# Stockage fichiers
# ------------------------------------
STORAGE_LOCATIONS=local
STORAGE_LOCAL_DRIVER=local
STORAGE_LOCAL_ROOT=./uploads

# ------------------------------------
# Cache & Rate Limiting
# ------------------------------------
CACHE_ENABLED=false
RATE_LIMITER_ENABLED=false

# ------------------------------------
# WebSocket (temps réel)
# ------------------------------------
WEBSOCKETS_ENABLED=true
WEBSOCKETS_REST_AUTH=handshake
WEBSOCKETS_GRAPHQL_AUTH=handshake

# ------------------------------------
# OAuth GitHub (optionnel)
# Créer une OAuth App: https://github.com/settings/developers
# ------------------------------------
AUTH_PROVIDERS=github
AUTH_GITHUB_DRIVER=oauth2
AUTH_GITHUB_CLIENT_ID=votre-github-client-id
AUTH_GITHUB_CLIENT_SECRET=votre-github-client-secret
AUTH_GITHUB_SCOPE=read:user user:email
AUTH_GITHUB_AUTHORIZE_URL=https://github.com/login/oauth/authorize
AUTH_GITHUB_ACCESS_URL=https://github.com/login/oauth/access_token
AUTH_GITHUB_PROFILE_URL=https://api.github.com/user
AUTH_GITHUB_IDENTIFIER_KEY=id
AUTH_GITHUB_EMAIL_KEY=email
AUTH_GITHUB_FIRST_NAME_KEY=name
AUTH_GITHUB_LAST_NAME_KEY=
AUTH_GITHUB_AVATAR_KEY=avatar_url
AUTH_GITHUB_REDIRECT_ALLOW_LIST=http://localhost:4200/auth/callback
AUTH_GITHUB_REDIRECT_URL=http://localhost:4200/auth/callback
AUTH_GITHUB_ALLOW_PUBLIC_REGISTRATION=true
AUTH_GITHUB_DEFAULT_ROLE_ID=votre-role-id-utilisateur

# ------------------------------------
# Meilisearch (recherche full-text)
# ------------------------------------
MEILISEARCH_HOST=http://localhost:7700
MEILISEARCH_API_KEY=votre-meilisearch-api-key
MEILISEARCH_INDEX_PREFIX=directus_
MEILISEARCH_BATCH_SIZE=100
